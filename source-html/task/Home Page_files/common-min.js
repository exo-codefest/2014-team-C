define("SHARED/common",["SHARED/jquery"],function(g){eXo.define.names=["$"];eXo.define.deps=[g];return function(e){function c(){var d=null;c.prototype.init=function(a,b){var d=e(a);d.off("mousedown");d.on("mousedown",eXo.core.DragDrop.start);a.root=b&&null!=b?b:a;a.root.onDragStart=new Function;a.root.onDragEnd=new Function;a.root.onDrag=new Function};c.prototype.start=function(a){var b=d=this,h=e(b.root);if(a.which&&1!=a.which||h.data("dragging"))return!1;var c=h.position();b.lastMouseX=a.pageX;
b.lastMouseY=a.pageY;b.root.onDragStart(c.left,c.top,b.lastMouseX,b.lastMouseY,a);e(document).on({mousemove:eXo.core.DragDrop.drag,mouseup:eXo.core.DragDrop.end,keydown:eXo.core.DragDrop.onKeyDownEvt,mouseout:eXo.core.DragDrop.cancel});h.data("dragging",!0);return!1};c.prototype.drag=function(a){var b=d,c=a.pageY,i=a.pageX,f=e(b.root),g=parseInt(f.css("top")),f=parseInt(f.css("left"))+(i-b.lastMouseX),b=g+(c-b.lastMouseY);d.root.style.right="";d.root.style.left=f+"px";d.root.style.top=b+"px";d.lastMouseX=
i;d.lastMouseY=c;d.root.onDrag(f,b,i,c,a);return!1};c.prototype.end=function(a){e(document).off("mousemove mouseup mouseout keydown");var b=e(d.root),c=b.position();d.root.onDragEnd(c.left,c.top,a.clientX,a.clientY,a);d=null;b.removeData("dragging");return!1};c.prototype.cancel=function(a){if(d.root.onCancel)d.root.onCancel(a);return!1};c.prototype.onKeyDownEvt=function(a){27===a.which&&eXo.core.DragDrop.end(a);return!1}}eXo.core.DragDrop=new c;return{DragDrop:eXo.core.DragDrop}}(g)});