define("SHARED/social-ui-activity-composer",["SHARED/socialUtil","SHARED/base","SHARED/jquery","SHARED/mentionsPlugin","SHARED/mentionsLib"],function(g,h,e,i,f){eXo.define.names=["socialUtil","base","$","mentionsPlugin","mentions"];eXo.define.deps=[g,h,e,i,f];return function(a,e){var b={clickOn:null,onLoadI18n:function(b){window.eXo.social.I18n.mentions=a.extend(!0,{},window.eXo.social.I18n.mentions,b)},onLoad:function(a){b.configure(a);b.init()},configure:function(a){b.composerId=a.composerId;b.textareaId=
a.textareaId;b.mentionBtnLabel=a.mentionBtnLabel;b.userTyped=!1},init:function(){var d=a("<a />",{href:"javascript:void(0);",rel:"tooltip","data-placement":"bottom",title:b.mentionBtnLabel,"class":"actionIcon",id:"mentionButton"}).append(a("<i />",{"class":"uiIconSocMention uiIconSocLightGray"}));a("div#ActivityComposerExt>a:last-child").before(d);b.composer=a("#"+b.composerId);a(document).ready(function(){var c=a("#actionLink");0<c.length&&!1===a(b.clickOn).hasClass("uidocactivitycomposer")&&(0==
a("#InputLink").length?(null==b.clickOn||""==b.clickOn)&&0==a("#UIPageCreationWizard").find("#UIPagePreview").length&&c.trigger("click"):(c=a("#ComposerContainer"),0<c.find("#LinkExtensionContainer").length&&c.find("#LinkExtensionContainer").hide().data("isShow",{isShow:!1})))});a("textarea#"+b.textareaId).exoMentions({onDataRequest:function(b,d,f){a.getJSON(window.location.protocol+"//"+window.location.host+"/"+eXo.social.portal.rest+"/social/people/getprofile/data.json?search="+d,function(a){a=
e.filter(a,function(a){return-1<a.name.toLowerCase().indexOf(d.toLowerCase())});f.call(this,a)})},idAction:"ShareButton",actionLink:"AttachButton",actionMention:"mentionButton",elasticStyle:{maxHeight:"64px",minHeight:"35px",marginButton:"4px",enableMargin:!1},messages:window.eXo.social.I18n.mentions})},post:function(){b.isReady=!1;b.currentValue=""},getValue:function(){return b.currentValue?b.currentValue:""},setCurrentValue:function(d){var c=a("textarea#"+b.textareaId);b.clickOn=d;b.currentValue=
c.val()},showLink:function(){var b=a("#ComposerContainer"),c=b.find("#LinkExtensionContainer");0<c.length?c.data("isShow").isShow?c.hide().data("isShow",{isShow:!1}):c.show().data("isShow",{isShow:!0}):0<b.find(".uiLinkShareDisplay").length?a("textarea#composerInput").exoMentions("clearLink",function(){}):a("#actionLink").trigger("click")},activeShareButton:function(){try{a("textarea#composerInput").exoMentions("showButton",function(){})}catch(b){}}};return window.UIComposer=b}(e,f._)});