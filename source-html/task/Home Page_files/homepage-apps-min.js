define("SHARED/jQueryWhoIsOnLine",["SHARED/juzu-ajax","SHARED/jquery","SHARED/userPopupPlugin"],function(d,a,h){eXo.define.names=["jzAjax","$","userPopupPlugin"];eXo.define.deps=[d,a,h];return function(a){var h=null;0==a("#onlineList li").length?a("#OnlinePortlet").hide():a("#OnlinePortlet").show();var d=function(){0==a("#onlineList li").length?a("#OnlinePortlet").hide():a("#OnlinePortlet").show();var d=eXo.social.portal,f="//"+window.location.host+d.context+"/"+d.rest+"/social/people/getPeopleInfo/{0}.json",
d=a("#onlineList").find('a:[href*="/profile/"]');a.each(d,function(d,i){var c=a(i).attr("href");c.substring(c.lastIndexOf("/")+1);a(i).userPopup({restURL:f,labels:h,content:!1,defaultPosition:"left",keepAlive:!0,maxWidth:"240px"})})},f=function(){a.getJSON("/rest/platform/isusersessionalive",function(h){!0==h&&a("#onlineList").jzLoad("WhoIsOnLineController.users()",d)})};setTimeout(f,500);setInterval(f,6E4);return{ajaxWhoIsOnLine:function(f){h=f;a.getJSON("/rest/platform/isusersessionalive",function(h){!0==
h&&a("#onlineList").jzLoad("WhoIsOnLineController.users()",d)})}}}(a)});
define("SHARED/jQueryGettingStarted",["SHARED/juzu-ajax","SHARED/jquery"],function(d,a){eXo.define.names=["jzAjax","$"];eXo.define.deps=[d,a];return function(a){return{initGettingStarted:function(){a(".jz").on("click","#DeleteLink",function(){a.getJSON("/rest/homepage/intranet/getting-started/deletePortlet/delete");a(".GettingStartedContainer").jzLoad("GettingStarted.delete()");a(".GettingStartedContainer").css("display","none")});a(".jz").on("click",".uiIconClose",function(){a.getJSON("/rest/homepage/intranet/getting-started/deletePortlet/delete");
a(".GettingStartedContainer").jzLoad("GettingStarted.delete()")});a.getJSON("/rest/homepage/intranet/getting-started/deletePortlet/IsDelete",function(b){!0==b&&a(".GettingStartedContainer").css("display","none");setTimeout(function(){!1==b&&a(".GettingStarted").jzLoad("GettingStarted.getGsList()",{reload:"true"})},100);setInterval(function(){a.getJSON("/rest/platform/isusersessionalive",function(d){!1==b&&!0==d&&(a(".TmpGettingStarted").jzLoad("GettingStarted.getGsList()",{reload:"false"}),d=a(".TmpGettingStarted").html(),
""!=d&&(a(".GettingStarted").html(d),a(".TmpGettingStarted").html("")))})},6E4)})}}}(a)});
define("SHARED/jQueryCalendar",["SHARED/juzu-ajax","SHARED/jquery"],function(d,a){eXo.define.names=["jzAjax","$"];eXo.define.deps=[d,a];return function(a){return{initCalendar:function(){a(".jz").on("click",".uiIconDel",function(){var b=a(this).parent().children("input").val();a("div.CalendarPortletContainer").jzLoad("CalendarPortletController.deleteCalendar()",{calendarId:b},function(){a('*[rel="tooltip"]').tooltip()})});a(".jz").on("click",".uiIconSimplePlusMini",function(){var b=a(this).parent().children("input").val();
a("div.CalendarPortletContainer").jzLoad("CalendarPortletController.addCalendar()",{calendarId:b},function(){a('*[rel="tooltip"]').tooltip()})});a(".jz").on("mouseenter",".calendarItem",function(){a(this).children("a.addButton").css("display","block")});a(".jz").on("mouseleave",".calendarItem",function(){a(this).children("a.addButton").css("display","none")});a(".jz").on("click","input.PLFcalendarSearchKey",function(){var b=a("input.PLFcalendarSearchKey").val(),d=a(this).val();d==b&&(d="",a(this).val(""));
a("ul.NonDisplayedCalendar").jzLoad("CalendarPortletController.getSearchResult()",{key:d},function(){a('*[rel="tooltip"]').tooltip()})});a(".jz").on("show","input.PLFcalendarSearchKey",function(){var b=a(this).val();a("ul.NonDisplayedCalendar").jzLoad("CalendarPortletController.getSearchResult()",{key:b},function(){a('*[rel="tooltip"]').tooltip()})});a(".jz").on("keydown","input.PLFcalendarSearchKey",function(){var b=a(this).val();a("ul.NonDisplayedCalendar").jzLoad("CalendarPortletController.getSearchResult()",
{key:b},function(){a('*[rel="tooltip"]').tooltip()})});a(".jz").on("keypress","input.PLFcalendarSearchKey",function(){var b=a(this).val();a("ul.NonDisplayedCalendar").jzLoad("CalendarPortletController.getSearchResult()",{key:b},function(){a('*[rel="tooltip"]').tooltip()})});a(".jz").on("keyup","input.PLFcalendarSearchKey",function(){var b=a(this).val();a("ul.NonDisplayedCalendar").jzLoad("CalendarPortletController.getSearchResult()",{key:b},function(){a('*[rel="tooltip"]').tooltip()})});a(".jz").on("focus",
"input.PLFcalendarSearchKey",function(){var b=a("input.PLFcalendarSearchKey").val();a(this).val()==b&&a(this).val("")});a(".jz").on("blur","input.PLFcalendarSearchKey",function(){var b=a("input.PLFcalendarSearchKey").val();""==a(this).val()&&a(this).val(b)});a(".jz").on("click",".btn",function(){a("div.CalendarPortletContainer").jzLoad("CalendarPortletController.calendarHome()",function(){a('*[rel="tooltip"]').tooltip()})});a(".jz").on("click",".prevDate",function(){a("div.CalendarPortletContainer").jzLoad("CalendarPortletController.decDate()",
{nbClick:"1"},function(){a('*[rel="tooltip"]').tooltip()})});a(".jz").on("click",".nextDate",function(){a("div.CalendarPortletContainer").jzLoad("CalendarPortletController.incDate()",{nbClick:"1"},function(){a('*[rel="tooltip"]').tooltip()})});a(".jz").on("click",".settingsLink",function(){a(".CalendarPortletContainer").jzLoad("CalendarPortletController.setting()",function(){a('*[rel="tooltip"]').tooltip()})});a(".jz").on("mouseenter",".calendarPortlet",function(){a(".settingsContainerPage").children("a").css("display",
"block")});a(".jz").on("mouseleave",".calendarPortlet",function(){a(".settingsContainerPage").children("a").css("display","none")});setTimeout(function(){a("div.CalendarPortletContainer").jzLoad("CalendarPortletController.calendarHome()",function(){a('*[rel="tooltip"]').tooltip()})},100)}}}(a)});
define("SHARED/jQueryInvitations",["SHARED/jquery"],function(d){eXo.define.names=["$"];eXo.define.deps=[d];return function(a){var d,b,j,l,f,i,k;a(".invitlabel").each(function(){j=a(this).data("acceptlabel");l=a(this).data("memberslabel");f=a(this).data("spacelabel");i=a(this).data("publiclabel");k=a(this).data("privatelabel")});return{initInvitations:function(){a.getJSON("/rest/homepage/intranet/invitations/allInvitations",function(g){0<g.length&&a("#InvitationsPortlet").show();g=g.slice().reverse();
a.each(g,function(g,c){b="";"people"==c.invitationType?(b=4>g?b+("<li class='clearfix peopleList' id='"+c.relationId+"'>"):b+("<li class='clearfix peopleList' style='display:none;' id='"+c.relationId+"'>"),b+="<div class='peopleInvitePicture pull-left avatarXSmall'><a href='"+c.profile_url+"'><img src='"+(void 0==c.senderAvatarUrl?"/social-resources/skin/images/ShareImages/UserAvtDefault.png":c.senderAvatarUrl)+"'></a></div>",b+="<div class='peopleInviteInfo'>",b+="<div class='peopleInviteName'><div class='name'><a href='"+
c.profile_url+"'>"+c.senderName+"</a></div>",b+="<div class='inviteAction'><div class='peopleInviteAction'><a class='connect btn-primary btn btn-mini' href='#' onclick='return false'>"+j+"</a> <a class='deny' href='#' onclick='return false'><i class='uiIconClose'></i></a></div>",void 0!=c.senderPosition&&(b+="<div class='peopleInvitePosition'>"+c.senderPosition+"</div>"),b+="</div></div>",b+="</div></li>",a("#requests").append(b),a("#"+c.relationId).mouseover(function(){a("#"+c.relationId+" .peopleInvitePosition").addClass("actionInviteAppears");
a("#"+c.relationId+" .peopleInviteAction").addClass("active")}),a("#"+c.relationId).mouseout(function(){a("#"+c.relationId+" .peopleInvitePosition").removeClass("actionInviteAppears");a("#"+c.relationId+" .peopleInviteAction").removeClass("active")}),a("#"+c.relationId+" a.connect").live("click",function(){a.getJSON("/rest/homepage/intranet/people/contacts/confirm/"+c.relationId,null);1==a("#requests").children().length?a("#InvitationsPortlet").fadeOut(500,function(){a("#"+c.relationId).remove();
a("#InvitationsPortlet").hide()}):a("#"+c.relationId).fadeOut(500,function(){a("#"+c.relationId).remove();var b=parseInt(a("#inviteCounter").html());a("#inviteCounter").html(b-1);a("#InvitationsPortlet li:hidden:first").fadeIn(500,function(){})})}),a("#"+c.relationId+" a.deny").live("click",function(){a.getJSON("/rest/homepage/intranet/people/contacts/deny/"+c.relationId,null);1==a("#requests").children().length?a("#InvitationsPortlet").fadeOut(500,function(){a("#"+c.relationId).remove();a("#InvitationsPortlet").hide()}):
a("#"+c.relationId).fadeOut(500,function(){a("#"+c.relationId).remove();var b=parseInt(a("#inviteCounter").html());a("#inviteCounter").html(b-1);a("#InvitationsPortlet li:hidden:first").fadeIn(500,function(){})})})):(b=4>g?b+("<li class='clearfix spaceList' id='"+c.spaceId+"'>"):b+("<li class='clearfix spaceList' style='display:none;' id='"+c.spaceId+"'>"),b+="<div class='spaceInvitePicture pull-left avatarXSmall'><img src='"+(void 0==c.spaceAvatarUrl?"/social-resources/skin/images/ShareImages/UserAvtDefault.png":
c.spaceAvatarUrl)+"'></div>",b+="<div class='spaceInviteInfo'>",b+="<div class='spaceInviteName'>"+c.spaceDisplayName+"</div>",d="open"==c.spaceRegistration?i:k,b="Space"==f?b+("<div class='spaceproperties'><div class='spaceInviteAction'  ><a class='connect  btn-primary btn btn-mini' href='#' onclick='return false'>"+j+"</a>  <a class='deny' href='#' onclick='return false'><i class='uiIconClose'></i></a></div><div class='spacevisibility'><i class='uiIconSocGroup uiIconSocLightGray'></i>&nbsp"+d+" "+
f+" - "+c.membersNumber+" "+l+"</div></div>"):b+("<div class='spaceproperties'><div class='spaceInviteAction'  ><a class='connect  btn-primary btn btn-mini' href='#' onclick='return false'>"+j+"</a>  <a class='deny' href='#' onclick='return false'><i class='uiIconClose'></i></a></div><div class='spacevisibility'><i class='uiIconSocGroup uiIconSocLightGray'></i>&nbsp"+f+" "+d+" - "+c.membersNumber+" "+l+"</div></div>"),b+="</div></li>",a("#requests").append(b),a("#"+c.spaceId).mouseover(function(){var b=
a(this);b.find(".spacevisibility").addClass("actionSpaceAppears");b.find(".name").addClass("actionInviteAppears");b.find(".spaceInviteAction").addClass("active")}),a("#"+c.spaceId).mouseout(function(){var b=a(this);b.find(".spacevisibility").removeClass("actionSpaceAppears");b.find(".name").removeClass("actionInviteAppears");b.find(".spaceInviteAction").removeClass("active")}),a("#"+c.spaceId+" a.connect").live("click",function(){a.getJSON("/rest/homepage/intranet/spaces/accept/"+c.spaceId,null);
1==a("#requests").children().length?a("#InvitationsPortlet").fadeOut(500,function(){a("#"+c.spaceId).remove();a("#InvitationsPortlet").hide()}):a("#"+c.spaceId).fadeOut(500,function(){a("#"+c.spaceId).remove();var b=parseInt(a("#inviteCounter").html());a("#inviteCounter").html(b-1);a("#InvitationsPortlet li:hidden:first").fadeIn(500,function(){})})}),a("#"+c.spaceId+" a.deny").live("click",function(){a.getJSON("/rest/homepage/intranet/spaces/deny/"+c.spaceId,null);1==a("#requests").children().length?
a("#InvitationsPortlet").fadeOut(500,function(){a("#"+c.spaceId).remove();a("#InvitationsPortlet").hide()}):a("#"+c.spaceId).fadeOut(500,function(){a("#"+c.spaceId).remove();var b=parseInt(a("#inviteCounter").html());a("#inviteCounter").html(b-1);a("#InvitationsPortlet li:hidden:first").fadeIn(500,function(){})})}));a("#inviteCounter").html(g+1)})})}}}(d)});
define("SHARED/jQuerySuggestions",["SHARED/jquery"],function(d){eXo.define.names=["$"];eXo.define.deps=[d];return function(a){function d(a,b){return b.number-a.number}function b(a){"-"===a[0]&&(a=a.substr(1,a.length-1));return function(b,c){return b[a].toLowerCase()<c[a].toLowerCase()?-1:b[a].toLowerCase()>c[a].toLowerCase()?1:0}}function j(a,b){return b.createdDate-a.createdDate}function l(a,b){return b.members-a.members}Array.prototype.shuffle=function(){for(var a=this.length,b=a;b--;){var c=parseInt(Math.random()*
a),d=this[b];this[b]=this[c];this[c]=d}};var f,i,k,g,n,c,o,p;a(".bundle").each(function(){f=a(this).data("member");i=a(this).data("connect");k=a(this).data("connection");g=a(this).data("private");n=a(this).data("public");c=a(this).data("spacemember");p=a(this).data("joinlabel");o=a(this).data("requestlabel")});return{initSuggestion:function(){a.getJSON("/rest/homepage/intranet/people/contacts/suggestions",function(c){0<c.items.length&&(a("#content").show(),a("#peopleSuggest").show());for(var f=!0,
m=0;m<c.items.length;m++)0!=c.items[m].number&&(f=!1);!0==f||0==c.noConnections?c.items.sort(j):(c.items.sort(b("suggestionName")),c.items.sort(d));a.each(c.items,function(b,c){var d="",d=2>b?d+("<li class='clearfix' id='"+c.suggestionId+"'>"):d+("<li class='clearfix' style='display:none;' id='"+c.suggestionId+"'>"),d=d+("<div class='peoplePicture pull-left'><div class='avatarXSmall'><a href='"+c.profile+"'><img src='"+c.avatar+"'></a></div></div>"),d=d+"<div class='peopleInfo'>"+("<div class='peopleName'><a href='"+
c.profile+"' target='_self'>"+c.suggestionName+"</a></div>"),d=d+"<div class='peopleContainer clearfix'>"+("<div style='display:none;' class='peopleAction' ><a class='connect btn-primary btn btn-mini' href='#' onclick='return false'>"+i+"</a><a class='ignore' href='#' onclick='return false'> <i class='uiIconClose'></i></a></div>"),d=d+("<div class='peopleDisplay'><div class='peoplePosition'>"+c.title+"</div><div class='peopleConnection'>"+c.number+"&nbsp;"+k+"</div></div>");a("#suggestions").append(d+
"</div></div></li>");a("#"+c.suggestionId).mouseover(function(){var b=a(this);b.find(".peopleName, .peoplePosition, .peopleConnection").addClass("actionAppears");b.find(".peopleAction").addClass("active").show()});a("#"+c.suggestionId).mouseout(function(){var b=a(this);b.find(".peopleName, .peoplePosition, .peopleConnection").removeClass("actionAppears");b.find(".peopleAction").removeClass("active").hide()});a("#"+c.suggestionId+" a.connect").live("click",function(){a.getJSON("/rest/homepage/intranet/people/contacts/connect/"+
c.suggestionId,null);1==a("#suggestions").children().length?a("#peopleSuggest").fadeOut(500,function(){a("#"+c.relationId).remove();a("#peopleSuggest").hide();a("#spaceSuggest").is(":hidden")&&a("#content").hide()}):a("#"+c.suggestionId).fadeOut(500,function(){a("#"+c.suggestionId).remove();a("#suggestions li:hidden:first").fadeIn(500,function(){})})});a("#"+c.suggestionId+" a.ignore").live("click",function(){1==a("#suggestions").children().length?a("#peopleSuggest").fadeOut(500,function(){a("#"+
c.relationId).remove();a("#peopleSuggest").hide();a("#spaceSuggest").is(":hidden")&&a("#content").hide()}):a("#"+c.suggestionId).fadeOut(500,function(){a("#"+c.suggestionId).remove();a("#suggestions li:hidden:first").fadeIn(500,function(){})})})})});a.getJSON("/rest/homepage/intranet/spaces/suggestions",function(b){0<b.items.length&&(a("#content").show(),a("#spaceSuggest").show());0==b.noConnections?b.items.sort(l):b.items.sort(d);a.each(b.items,function(b,d){var e="",e=2>b?e+("<li class='clearfix' id='"+
d.spaceId+"'>"):e+("<li class='clearfix'' style='display:none;' id='"+d.spaceId+"'>"),e=e+("<div class='spacePicture pull-left'><div class='avatarXSmall'><img src='"+d.avatarUrl+"'></div></div>"),e=e+"<div class='spaceInfo'>"+("<div class='spaceName'>"+d.displayName+"</div>"),e=e+"<div class='spaceContent clearfix'>",e="open"==d.registration?e+("<div class='spaceAction' ><a class='connect btn-primary btn btn-mini' href='#' onclick='return false'>"+p+"</a>"):e+("<div class='spaceAction' ><a class='connect btn-primary btn btn-mini' href='#' onclick='return false'>"+
o+"</a>"),e=e+"<a class='ignore' href='#' onclick='return false'> <i class='uiIconClose'></i></a></div>",e="Private"==d.privacy?e+("<div class='spaceContainer'><div class='spacePrivacy'><i class='uiIconSocGroup uiIconSocLightGray'></i>&nbsp"+g+"&nbsp;-&nbsp;"+d.members+"&nbsp;"+c+"</div>"):e+("<div class='spaceContainer'><div class='spacePrivacy'><i class='uiIconSocGroup uiIconSocLightGray'></i>&nbsp"+n+"&nbsp;-&nbsp;"+d.members+"&nbsp;"+c+"</div>"),e=e+("<div class='spaceCommon'>"+d.number+"&nbsp;"+
f+"</div></div>");a("#suggestionsspace").append(e+"<div></div></li>");a("#"+d.spaceId).mouseover(function(){var b=a(this);b.find(".spacePrivacy, .spaceCommon, .spaceName").addClass("actionspaceAppears");b.find(".spaceAction").addClass("active").show()});a("#"+d.spaceId).mouseout(function(){var b=a(this);b.find(".spacePrivacy, .spaceCommon, .spaceName").removeClass("actionspaceAppears");b.find(".spaceAction").removeClass("active").hide()});a("#"+d.spaceId+" a.connect").live("click",function(){a.getJSON("/rest/homepage/intranet/spaces/request/"+
d.spaceId,null);1==a("#suggestionsspace").children().length?a("#spaceSuggest").fadeOut(500,function(){a("#"+d.spaceId).remove();a("#spaceSuggest").hide();a("#peopleSuggest").is(":hidden")&&a("#content").hide()}):a("#"+d.spaceId).fadeOut(500,function(){a("#"+d.spaceId).remove();a("#suggestionsspace li:hidden:first").fadeIn(500,function(){})})});a("#"+d.spaceId+" a.ignore").live("click",function(){1==a("#suggestionsspace").children().length?a("#spaceSuggest").fadeOut(500,function(){a("#"+d.spaceId).remove();
a("#spaceSuggest").hide();a("#peopleSuggest").is(":hidden")&&a("#content").hide()}):a("#"+d.spaceId).fadeOut(500,function(){a("#"+d.spaceId).remove();a("#suggestionsspace li:hidden:first").fadeIn(500,function(){})})})})})}}}(d)});