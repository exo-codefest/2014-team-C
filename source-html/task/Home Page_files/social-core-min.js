define("SHARED/social-core",["SHARED/base"],function(j){eXo.define.names=["base"];eXo.define.deps=[j];return function(){function h(a){for(var b={},a=a.split(","),c=0;c<a.length;c++)b[a[c]]=!0;return b}var l=/^<(\w+)((?:\s+\w+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,m=/^<\/(\w+)[^>]*>/,j=/(\w+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,o=h("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed"),p=h("address,applet,blockquote,button,center,dd,del,dir,div,dl,dt,fieldset,form,frameset,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,p,pre,script,table,tbody,td,tfoot,th,thead,tr,ul"),
q=h("a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),r=h("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),s=h("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),t=h("script,style"),n=this.HTMLParser=function(a,b){function c(a,c,d,g){if(p[c])for(;e.last()&&q[e.last()];)i("",e.last());r[c]&&e.last()==
c&&i("",c);(g=o[c]||!!g)||e.push(c);if(b.start){var f=[];d.replace(j,function(b,a,c,d,e){b=c?c:d?d:e?e:s[a]?a:"";f.push({name:a,value:b,escaped:b.replace(/(^|[^\\])"/g,'$1\\"')})});b.start&&b.start(c,f,g)}}function i(a,c){if(c)for(d=e.length-1;0<=d&&!(e[d]==c);d--);else var d=0;if(0<=d){for(var g=e.length-1;g>=d;g--)b.end&&b.end(e[g]);e.length=d}}var d,f,e=[],g=a;for(e.last=function(){return this[this.length-1]};a;){f=!0;if(!e.last()||!t[e.last()]){if(0==a.indexOf("<\!--"))d=a.indexOf("--\>"),0<=
d&&(b.comment&&b.comment(a.substring(4,d)),a=a.substring(d+3),f=!1);else if(0==a.indexOf("</")){if(d=a.match(m))a=a.substring(d[0].length),d[0].replace(m,i),f=!1}else if(0==a.indexOf("<")&&(d=a.match(l)))a=a.substring(d[0].length),d[0].replace(l,c),f=!1;f&&(d=a.indexOf("<"),f=0>d?a:a.substring(0,d),a=0>d?"":a.substring(d),b.chars&&b.chars(f))}else a=a.replace(RegExp("(.*)</"+e.last()+"[^>]*>"),function(a,c){c=c.replace(/<\!--(.*?)--\>/g,"$1").replace(/<!\[CDATA\[(.*?)]]\>/g,"$1");b.chars&&b.chars(c);
return""}),i("",e.last());if(a==g)throw"Parse Error: "+a;g=a}i()};this.HTMLtoXML=function(a){var b="";n(a,{start:function(c,a,d){b+="<"+c;for(c=0;c<a.length;c++)b+=" "+a[c].name+'="'+a[c].escaped+'"';b+=(d?"/":"")+">"},end:function(a){b+="</"+a+">"},chars:function(a){b+=a},comment:function(a){b+="<\!--"+a+"--\>"}});return b};this.HTMLtoDOM=function(a,b){var c=h("html,head,body,title"),i={link:"head",base:"head"};b?b=b.ownerDocument||b.getOwnerDocument&&b.getOwnerDocument()||b:"undefined"!=typeof DOMDocument?
b=new DOMDocument:"undefined"!=typeof document&&document.implementation&&document.implementation.createDocument?b=document.implementation.createDocument("","",null):"undefined"!=typeof ActiveX&&(b=new ActiveXObject("Msxml.DOMDocument"));var d=[];!(b.documentElement||b.getDocumentElement&&b.getDocumentElement())&&b.createElement&&function(){var a=b.createElement("html"),c=b.createElement("head");c.appendChild(b.createElement("title"));a.appendChild(c);a.appendChild(b.createElement("body"));b.appendChild(a)}();
if(b.getElementsByTagName)for(var f in c)c[f]=b.getElementsByTagName(f)[0];var e=c.body;n(a,{start:function(a,f,h){if(c[a])e=c[a];else{var k=b.createElement(a),j;for(j in f)k.setAttribute(f[j].name,f[j].value);i[a]&&"boolean"!=typeof c[i[a]]?c[i[a]].appendChild(k):e&&e.appendChild&&e.appendChild(k);h||(d.push(k),e=k)}},end:function(){d.length-=1;e=d[d.length-1]},chars:function(a){e.appendChild(b.createTextNode(a))},comment:function(){}});return b}}()});